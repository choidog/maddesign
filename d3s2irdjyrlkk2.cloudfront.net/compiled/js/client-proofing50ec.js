window.Proofing={favoriteStar:".js-favourite-add",starIcon:".js-star-icon",favoriteShow:".js-favourite-show",shoppingshow:".js-shopping-cart-show",idArray:[],emailIcon:".js-photographer-email-icon",friendsEmailIcon:".js-friends-email-icon",modalClose:".js-modal-close",markAllPhotos:".js-mark-all",removeFavIcon:".js-remove-fav-icon",deleteFavIcon:".js-delete-fav-icon",homeScreenBar:".js-close-homescreen-bar",favouriteIcon:".js-favourite-icon",createmultipleFavIcon:".js-create-favorite-list",cancelmultipleFavIcon:".js-multiple-favorite-cancel",addmultipleFavIcon:".js-add-multiple-favorite",addFavList:".fav-submit-modal-btn",addcomments:".js-image-comments-btn"},window.notyDefaults={dismissQueue:!0,layout:"bottomCenter",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500}},window.notyError={dismissQueue:!0,layout:"top",theme:"relax",animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500}},Proofing.showEmailPrivacyModal=function(a){void 0!==a&&void 0!==$(a).attr("data-imageid")&&""!=$(a).attr("data-imageid")&&$("input[name='fav_imageid']").val($(a).attr("data-imageid")),$(".js-name-entry").show(),$(".js-email-entry").show(),$(".fav-submit-btn").unbind("click"),$(".fav-submit-btn").one("click",function(a){$(".js-get-email-container").find("form").submit()}),$("#email-privacy-wrapper").addClass("modal-active"),$(".email-modal-body, .js-multiple-favorite-list-form, .js-pin-entry").hide(),$(".js-single_download-pin-entry").show(),$(".js-get-email-container").show()},Proofing.showCommentEmailPrivacyModal=function(a){void 0!==a&&void 0!==$(a).attr("data-imageid")&&""!=$(a).attr("data-imageid")&&$("input[name='fav_imageid']").val($(a).attr("data-imageid")),$(".fav-submit-btn").unbind("click"),$(".fav-submit-btn").one("click",function(a){$(".js-comment-email-container").find("form").submit()}),$("#email-privacy-wrapper").addClass("modal-active"),$(".email-modal-body, .js-multiple-favorite-list-form, .js-pin-entry").hide(),$(".js-single_download-pin-entry").show(),$(".js-comment-email-container").show()},Proofing.activeFavouriteImage=function(a,i,e,t){$(".js-favourite-loading").show();var o=$("#csrf_token").val();if($("#delete_id").length)$(event.target).attr("data-deleteId");$.ajax({data:{id:a,list_id:e},type:"POST",url:"/site/"+i+"/favourite?_token="+o}).done(function(i){if(0==i.status){if($(".js-favourite-loading").hide(),void 0!==i.message)return sweetAlert(i.message),!1;if(void 0!==i.count&&parseInt(i.count)>0&&parseInt($(".js-favourite-max").val())>0)return sweetAlert("Oops...","You can not add more than "+$(".js-favourite-max").val()+" images to the favorite list!","error"),!1}else{var o;if($(t).toggleClass("show-active"),$("body").find('.js-add-multiple-favorite[data-imageid="'+a+'"]').length>0)-1===(o=$("body").find('.js-add-multiple-favorite[data-imageid="'+a+'"]').attr("data-fav-lists").split(",")).indexOf(e)?1==i.favorite&&o.push(e):0==i.favorite&&o.pop(e),$("body").find('.js-add-multiple-favorite[data-imageid="'+a+'"]').attr("data-fav-lists",o.join(","));if($("body").find('.js-add-multiple-favorite[data-photoid="'+a+'"]').length>0)-1===(o=$("body").find('.js-add-multiple-favorite[data-photoid="'+a+'"]').attr("data-fav-lists").split(",")).indexOf(e)?1==i.favorite&&o.push(e):0==i.favorite&&o.pop(e),$("body").find('.js-add-multiple-favorite[data-photoid="'+a+'"]').attr("data-fav-lists",o.join(","));$("body").find('.favourite-show[data-imageid="'+a+'"]').hasClass("show-multiple-active")?1==i.favorite||$("body").find('.favourite-show[data-imageid="'+a+'"]').removeClass("show-multiple-active"):$("body").find('.favourite-show[data-imageid="'+a+'"]').hasClass("show-active")?1==i.favorite?($("body").find('.favourite-show[data-imageid="'+a+'"]').addClass("show-multiple-active"),$("body").find('.favourite-show[data-imageid="'+a+'"]').siblings(".js-shopping-cart-show").addClass("side-favorite-multiple-active"),"undefined"!=typeof light&&void 0!==light.div&&$(light.div).find(".favourite-star").addClass("red")):($("body").find('.favourite-show[data-imageid="'+a+'"]').removeClass("show-active"),$("body").find('.favourite-show[data-imageid="'+a+'"]').siblings(".js-shopping-cart-show").removeClass("side-favorite-active"),$("body").find('.favourite-show[data-imageid="'+a+'"]').siblings(".js-shopping-cart-show").removeClass("side-favorite-multiple-active"),"undefined"!=typeof light&&void 0!==light.div&&$(light.div).find(".favourite-star").removeClass("red")):1==i.favorite&&($("body").find('.favourite-show[data-imageid="'+a+'"]').addClass("show-active"),$("body").find('.favourite-show[data-imageid="'+a+'"]').siblings(".js-shopping-cart-show").addClass("side-favorite-active"),"undefined"!=typeof light&&void 0!==light.div&&$(light.div).find(".favourite-star").addClass("red")),$(t).parent().find(".list-title span").text(i.count+" Photos"),$(t).attr("data-favourite-status",function(a,i){return 1==i?0:1}),null!=window.location.pathname.match("favourite")&&$(t).parents(".js-grid-item").toggleClass("fav-favourite-dim"),setTimeout(function(){$(".js-favourite-count").text(i.count)},150),Proofing.jqueryNotyCall(t,i),$(".js-favourite-loading").hide()}})},Proofing.CreateNewFavList=function(a,i){var e=$("#csrf_token").val(),t=$("#client-slug").val();if(""==a||!isNaN(a))return sweetAlert("Please choose a name for favourite list."),!1;$.ajax({data:{name:a,description:i},type:"POST",url:"/site/"+t+"/favorite-list-create?_token="+e}).done(function(a){if("success"==a.status){var i=$("#multiple-fav-modal-temp").html();i=$(i)[0],$(i).find(".list-title h3").html(a.list_name),$(i).find(".js-favourite-add").attr("data-favlistid",a.list_id),$(i).find(".js-favourite-add").attr("data-imageid",$(".multiple-favorite-list ul").find(".js-favourite-add").attr("data-imageid")),$(i).find("img").attr("src",$(".multiple-favorite-list ul>li").find("img").attr("src")),$(".multiple-favorite-list ul").append(i),$(".js-multiple-form-cancel").click()}})},Proofing.activeDowloadImage=function(a,i){var e=$("#csrf_token").val();if($("#delete_id").length)$(event.target).attr("data-deleteId");$.ajax({data:{id:a},type:"POST",url:"/site/"+i+"/favourite?_token="+e}).done(function(a){})},Proofing.jqueryNotyCall=function(a,i){var e="";if("object"==typeof i&&1==i.favorite){var t=parseInt($(".js-favourite-count").show().text())+1;$(".fav-favourite-count").text(t+" PHOTOS"),e=$(".js-favourite-count").data("addfavlabel");var o='<div class="js-favimg-noty favimg-noty"><img src="'+$(a).attr("data-thumb-image")+'"></div>'}else if("object"==typeof i&&0==i.favorite){t=parseInt($(".js-favourite-count").show().text())-1;$(".fav-favourite-count").text(t+" PHOTOS"),e=$(".js-favourite-count").data("removefavlabel");o='<div class="js-favimg-noty favimg-noty"><img src="'+$(a).attr("data-thumb-image")+'"></div>'}else if(1==$(a).attr("data-favourite-status")){t=parseInt($(".js-favourite-count").show().text())+1;$(".fav-favourite-count").text(t+" PHOTOS"),e=$(".js-favourite-count").data("addfavlabel");o='<div class="js-favimg-noty favimg-noty"><img src="'+$(a).attr("data-thumb-image")+'"></div>'}else{t=parseInt($(".js-favourite-count").show().text())-1;$(".fav-favourite-count").text(t+" PHOTOS"),e=$(".js-favourite-count").data("removefavlabel");o='<div class="js-favimg-noty favimg-noty"><img src="'+$(a).attr("data-thumb-image")+'"></div>'}noty($.extend({text:e,type:"success",maxVisible:3,template:'<div class="noty_message text-left">'+o+'<span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:6e3},window.notyDefaults))},Proofing.clientProofingInit=function(){var a=$(Proofing.favoriteStar).data("clientslug"),i=$("#csrf_token").val();if($("#messages-error").data("erorr"))noty($.extend({text:$("#messages-error").text(),type:"error",template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',timeout:5e3},window.notyDefaults));if($("#messages").data("exists"))noty($.extend({text:$("#messages").text(),type:"success",template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',timeout:5e3},window.notyDefaults));if($("body").on("click",Proofing.favoriteStar,function(a){if(a.stopPropagation(),$(".js-download-text").hide(),$(".js-save-fav-text").show(),$("#email-privacy-wrapper").data("ispassword")){var i=void 0!==$(this).attr("data-imageid")?$(this).attr("data-imageid"):$(this).attr("data-photoid"),e=$(this).attr("data-clientslug"),t=$(this).attr("data-favlistid");Proofing.activeFavouriteImage(i,e,t,this)}else Proofing.showEmailPrivacyModal(this)}),$(Proofing.markAllPhotos).on("click",function(){$(".js-download-text").hide(),$(".js-save-fav-text").show();var e=$(this);if($("#email-privacy-wrapper").data("ispassword")){var t=$(this).data("id");$(this).children(".infinte-loader").fadeIn(),$.ajax({data:{id:t},type:"POST",url:"/site/"+a+"/favourite-gallery/"+t+"?_token="+i}).done(function(a){a.status?($(Proofing.favoriteShow).addClass("show-active"),$(Proofing.favoriteStar).attr("data-favourite-status",1),e.children(".infinte-loader").fadeOut()):(e.children(".infinte-loader").fadeOut(),sweetAlert("Oops...","You can not add more than "+$(".js-favourite-max").val()+" images to the favorite list!","error"))})}else Proofing.showEmailPrivacyModal()}),$("body").on("click",Proofing.addcomments,function(a){if(a.stopPropagation(),$("#email-privacy-wrapper").data("ispassword")){var i=$(this).attr("data-proofingid"),e=$(this).attr("data-imageid"),t=$(this).attr("data-csrftoken"),o=($(this).attr("data-clientid"),$("#dataloaded").val());0==o&&$("#chat__messages").html(""),$.ajax({url:window.location.pathname.split("/").slice(0,3).join("/")+"/all-photo-comments/"+i,data:{_token:t,imageid:e},type:"post",dataType:"json",success:function(a){$(".js-fab-button").hasClass("is-visible")||($(".js-prime-comments").toggleClass("show"),$(".js-prime-close").toggleClass("is-active"),$(".js-prime-close").toggleClass("is-visible"),$("#prime").toggleClass("is-float"),$(".chat").toggleClass("is-visible"),$(".js-fab-button").toggleClass("is-visible")),window.innerWidth<768&&$("#prime").hide(),$(".js-chat_back").hide(),$("#chat_image_header").hide(),$("#chat_image_reply").show(),$("#parentid").val(0),$("#dataloaded").val(1),""==a.image.src?($("#chat_image_reply").find(".toast__icon").hide(),$("#chat_image_reply").find(".toast__icon").addClass("toast__icon_hide"),$("#chat_image_reply").find(".toast__icon_hide").removeClass("toast__icon")):($("#chat_image_reply").find(".toast__icon_hide").addClass("toast__icon"),$("#chat_image_reply").find(".toast__icon").show(),$("#chat_image_reply").find("img").attr("src",a.image.src)),$("#com_image_id").val(e),$("#toast_reply_text").html("<small>"+a.image.gallery+" &gt; "+a.image.name+"</small>"),0==o&&$("#chat__messages").html(a.comment);var i=600;$(".toast__container").each(function(){$(this).is(":visible")&&(i-=+$(this).innerHeight())}),$("#chat__messages").css({"min-height":i});var t=0;$("#chat__messages span").each(function(a,i){t+=parseInt($(this).height())}),$("#chat__messages").scrollTop(t),$("#chatSend").focus()},error:function(a,i){window.location.reload()}})}else Proofing.showCommentEmailPrivacyModal(this)}),$(Proofing.emailIcon).on("click",function(){$(".email-modal-body, .js-multiple-favorite-list-form").hide(),$("#email-privacy-wrapper").data("ispassword")?($(".js-send-inquiry-container").hide(),$(".js-photographer-email-container").show()):($(".js-photographer-email-container").hide(),$(".js-get-email-fav-container, .js-send-inquiry-container").show()),$("#email-privacy-wrapper").addClass("modal-active")}),$(Proofing.friendsEmailIcon).on("click",function(){$(".email-modal-body, .js-multiple-favorite-list-form").hide(),$(".js-friends-email-container").show(),$("#email-privacy-wrapper").addClass("modal-active")}),$(Proofing.removeFavIcon).on("click",function(){$(".email-modal-body, .js-multiple-favorite-list-form").hide(),$(".js-remove-favourite-container").show(),$("#email-privacy-wrapper").addClass("modal-active")}),$(Proofing.deleteFavIcon).on("click",function(){$(".email-modal-body, .js-multiple-favorite-list-form").hide(),$(".js-delete-favourite-container").show(),$("#email-privacy-wrapper").addClass("modal-active")}),$(Proofing.createmultipleFavIcon).on("click",function(){$(".js-photographer-email-container, .js-get-email-container, .js-download-pin-container, .js-get-email-fav-container, .js-send-inquiry-container, .js-friends-email-container, .js-remove-favourite-container").hide(),$(".js-multiple-favorite-list-form, .multiple-favorite-modal").show(),$("#email-privacy-wrapper").addClass("modal-active")}),$(Proofing.cancelmultipleFavIcon).on("click",function(){$(".js-multiple-favorite-list-form")[0].reset(),$("#email-privacy-wrapper").removeClass("modal-active")}),Proofing.addMultipleFavInit=function(){$(Proofing.addmultipleFavIcon).unbind("click"),$(Proofing.addmultipleFavIcon).on("click",function(a){Proofing.gridDiv=this;var i=$(Proofing.gridDiv).attr("data-imageid")||$(Proofing.gridDiv).attr("data-photoid"),e=$(Proofing.gridDiv).attr("data-thumb-image");a.stopPropagation();var t=$(Proofing.gridDiv).attr("data-favorite-image"),o=$(Proofing.gridDiv).attr("data-fav-lists").split(",");$(".js-multiple-single-img").attr("src",t),$(".js-mfavorite-img-thumb").attr("src",e),$(".js-mfavorite-img-thumb").siblings(".js-favourite-add").attr("data-thumb-image",e),$(".email-modal-body, .js-multiple-favorite-list-form").hide(),$(".js-multiple-favorite-list-form").find(".js-favourite-add").attr("data-imageid",i),$.each($(".js-multiple-favorite-list-form").find(".js-favourite-add"),function(a,i){"object"==typeof o&&-1!=o.indexOf($(i).attr("data-favlistid"))?$(i).addClass("show-active"):$(i).removeClass("show-active")}),$(".js-multiple-favorite-list-form").show(),$("#email-privacy-wrapper").addClass("modal-active"),$("#email-privacy-wrapper").addClass("multiple-favorite-container")})},Proofing.addMultipleFavInit(),$(Proofing.addFavList).on("click",function(){var a=$.trim($("#fav-list-name").val()),i=$.trim($("#fav-list-desc").val());Proofing.CreateNewFavList(a,i)}),$(".js-add-favorite-list").on("click",function(){$(".multiple-favorite-form").show()}),$(".js-multiple-form-cancel").on("click",function(){$(".js-multiple-favorite-list-form")[0].reset(),$(".multiple-favorite-form").hide()}),$("body").on("click",".favourite-download-all, .gallery-download-all, .single-image-download",function(a){a.stopPropagation(),$(this).addClass("active");var i=$(this),e=(window.navigator.standalone,window.navigator.userAgent.toLowerCase());/safari/.test(e);/iphone|ipod|ipad/.test(e)?$(document).on("mouseup touchstart",function(a){i.removeClass("active")}):$(document).mouseup(function(a){i.removeClass("active")})}),$("body").on("click",".gallery-download-all .dropdown li,  .single-image-download .dropdown li",function(a){a.stopPropagation(),$('[name="single_download"]').val($(this).data("value")),$('[name="type"]').val($(this).attr("value")),$('[name="favorite_version"]').val($(this).data("value"));var i=$(this),e=!!$(a.target).parents(".js-download-photos-form").find('[name="single_download"]').length;if(e)var t=$("#email-privacy-wrapper").data("isimagepin");else t=$("#email-privacy-wrapper").data("ispin");if($("#email-privacy-wrapper").data("ispassword"))if(t){$(".js-comment-email-container, .js-photographer-email-container, .js-friends-email-container, .js-get-email-fav-container, .js-send-inquiry-container, .js-remove-favourite-container, .js-multiple-favorite-list-form, .js-delete-favourite-container").hide(),$(".js-get-email-container, .js-download-pin-container, .js-download-pass-text, .js-download-text").show(),$("#email-privacy-wrapper").addClass("modal-active"),$(".js-name-entry, .js-email-entry, .js-save-fav-text").hide(),$(".js-get-email-container .fav-submit-btn").attr("type","button");var o=$(this).parents(".js-download-photos-form").attr("action");"1"==$("#email-privacy-wrapper").attr("data-ispin")&&$("#email-privacy-wrapper").find("form.js-form-action-fill").attr("action",o),$(".fav-form-submit-btn").on("click",function(){$(this).parents(".js-download-photos-form").submit(),console.log("locationreload"),$('[name="g_captcha_token"]').val(""),$("#email-privacy-wrapper").removeClass("modal-active")}),$(".fav-submit-btn").unbind("click"),$(".fav-submit-btn").on("click",function(a){$(".js-pin-entry").is(":visible")&&$('[name="download_pin"]').val($(".js-pin-entry").val()),i.parents(".js-download-photos-form").submit(),$("#email-privacy-wrapper").removeClass("modal-active")})}else{if("1"==userObject.isMobile){if("yes"!=sessionStorage.getItem("photodownload")){var s=$(".js-download-photos-label-form").attr("data-alert_label");alert(s)}sessionStorage.setItem("photodownload","yes")}i.parents(".js-download-photos-form").submit()}else{if(1==$(this).data("download")?($(".js-download-text").show(),$(".js-save-fav-text").hide()):($(".js-download-text").hide(),$(".js-save-fav-text").show()),$(".js-comment-email-container, .js-photographer-email-container, .js-download-pass-text, .js-download-pin-container, .js-send-inquiry-container, .js-remove-favourite-container, .js-multiple-favorite-list-form").hide(),$(".js-get-email-container, .js-pin-entry").show(),$(".js-single_download-pin-entry").hide(),!$(".js-pin-entry").is(":visible")&&$("#email-privacy-wrapper").data("anonymous")&&e&&!$("#email-privacy-wrapper").data("isimagepin"))return void i.parents(".js-download-photos-form").submit();$("#email-privacy-wrapper").data("anonymous")&&e&&($(".js-name-entry").hide(),$(".js-email-entry").hide()),e?$("#email-privacy-wrapper").data("isimagepin")?($(".js-pin-entry").show(),$(".js-single_download-pin-entry").hide()):($(".js-pin-entry").hide(),$(".js-single_download-pin-entry").show()):$("#email-privacy-wrapper").data("ispin")?($(".js-pin-entry").show(),$(".js-single_download-pin-entry").hide()):($(".js-pin-entry").hide(),$(".js-single_download-pin-entry").show()),$("#email-privacy-wrapper").addClass("modal-active"),$(".js-get-email-container .fav-submit-btn").attr("type","button"),$(".fav-submit-btn").unbind("click"),$(".fav-submit-btn").on("click",function(a){$(".js-name-entry").is(":visible")&&$('[name="name"]').val($(".js-name-entry").val()),$(".js-email-entry").is(":visible")&&$('[name="email"]').val($(".js-email-entry").val()),$(".js-pin-entry").is(":visible")&&$('[name="download_pin"]').val($(".js-pin-entry").val()),i.parents(".js-download-photos-form").submit(),!$("#email-privacy-wrapper").data("anonymous")&&e&&$("#email-privacy-wrapper").data("ispassword",1),$("#email-privacy-wrapper").removeClass("modal-active")})}}),$(".favourite-download-all .dropdown li").on("click",function(a){a.stopPropagation(),$('[name="favorite_version"]').val($(this).data("value"));var i=$(this);$("#email-privacy-wrapper").data("ispin")?($(".js-comment-email-container, .js-photographer-email-container, .js-friends-email-container, .js-get-email-container, .js-get-email-fav-container, .js-send-inquiry-container, .js-remove-favourite-container, .js-multiple-favorite-list-form, .js-delete-favourite-container").hide(),$(".js-download-pin-container").show(),$("#email-privacy-wrapper").addClass("modal-active"),$(".fav-submit-btn").unbind("click"),$(".fav-submit-btn").on("click",function(){$('[name="download_pin"]').val($(this).parents(".js-download-pin-container").find(".js-pin-entry").val()),i.parents(".favourite-download-form").submit(),$("#email-privacy-wrapper").removeClass("modal-active")})):$(this).parents(".favourite-download-form").submit()}),$(Proofing.modalClose).on("click",function(){$("#proofing-user-profile").removeClass("active"),$("#email-privacy-wrapper").removeClass("modal-active"),$("#email-privacy-wrapper").removeClass("multiple-favorite-container"),$(".js-multiple-favorite-list-form")[0].reset()}),$(".js-email-privacy-overlay").on("click",function(){$("#email-privacy-wrapper").removeClass("modal-active")}),$(".js-homescreen-menubutton").on("click",function(){$(".add-homescreen-bar-wrapper").removeClass("homescreen-bar-hide"),$(".add-homescreen-bar-wrapper").show()}),1==window.navigator.standalone&&$(".add-homescreen-bar-wrapper").addClass("homescreen-bar-hide"),"standalone"in window.navigator&&window.navigator.standalone){var e;document.addEventListener("click",function(a){for(e=a.target;"A"!==e.nodeName&&"HTML"!==e.nodeName;)e=e.parentNode;"href"in e&&-1!==e.href.indexOf("http")&&-1!==e.href.indexOf(document.location.host)&&(a.preventDefault(),document.location.href=e.href)},!1)}-1!=document.cookie.search("homescreen_bar=1")&&$(".add-homescreen-bar-wrapper").addClass("homescreen-bar-hide"),$(Proofing.homeScreenBar).on("click",function(a){$(".add-homescreen-bar-wrapper").slideUp();var i=new Date,e=i.getTime();e+=36e5,i.setTime(e),document.cookie="homescreen_bar=1; expires="+i.toUTCString()+"; path=/"}),$("body").unbind("click",Proofing.favouriteIcon),$("body").on("click",Proofing.favouriteIcon,function(a){if("1"!=$("#email-privacy-wrapper").data("ispassword"))Proofing.showEmailPrivacyModal();else{var i=$(this).attr("data-photoid"),e=$(this).attr("data-clientslug");Proofing.activeFavouriteImage(i,e,this),$($(Proofing.favoriteShow)[window.slideIndex]).toggleClass("show-active"),$($(Proofing.favoriteStar)[window.slideIndex]).attr("data-favourite-status",function(a,i){return 1==i?0:1}),$(this).parent().find("#lg-favorite-img").addClass(function(a,i){return"red"===i?"":"red"}),$(this).parent().parent().find(".slideshowgal-cart.favourite-info-active .favorite-icons-active").toggleClass("left-50")}})};
